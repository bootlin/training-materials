\section{Yocto Project and Poky reference system overview}

\subsection{The Yocto Project overview}

\begin{frame}
  \frametitle{About}
  \begin{itemize}
  \item The Yocto Project is a set of templates, tools and methods
        that allow to build custom embedded Linux-based systems.
  \item It is an open source project initiated by the Linux Foundation
        in 2010 and is still managed by one of its fellows: Richard
        Purdie.
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{The Yocto Project lexicon}
  \begin{itemize}
  \item The core components of the Yocto Project are:
    \begin{itemize}
      \item BitBake, the {\em build engine}. It is a task scheduler,
        like \code{make}. It interprets configuration files and
        recipes (also called {\em metadata}) to perform a set of
        tasks, to download, configure and build specified applications
        and filesystem images.
      \item OpenEmbedded-Core, a set of base {\em layers}. It is a set
        of recipes, layers and classes which are shared between all
        OpenEmbedded based systems.
      \item Poky, the {\em reference system}. It is a collection of
        projects and tools, used to bootstrap a new distribution based
        on the Yocto Project.
    \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}{The Yocto Project lexicon}
  \begin{center}
    \includegraphics[height=0.8\textheight]{slides/yocto-overview/yocto-project-overview.pdf}
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{The Yocto Project lexicon}
  \begin{itemize}
    \item Organization of OpenEmbedded-Core:
    \begin{itemize}
      \item {\em Recipes} describe how to fetch, configure, compile
        and package applications and images. They have a specific
        syntax.
      \item {\em Layers} are sets of recipes, matching a common
        purpose. For Texas Instruments board support, the {\em
        meta-ti} layer is used.
      \item Multiple layers are used within a same distribution,
        depending on the requirements.
      \item It supports the ARM, MIPS (32 and 64 bits), PowerPC,
        RISC-V and x86 (32 and 64 bits) architectures.
      \item It supports QEMU emulated machines for these architectures.
    \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{The Yocto Project lexicon}
  \begin{itemize}
    \item The Yocto Project is \textbf{not used as} a finite set of
          layers and tools.
    \item Instead, it provides a \textbf{common base} of tools and
          layers on top of which custom and specific layers are added,
          depending on your target.
    \item The main required element is \textbf{Poky}, the reference
          system which includes OpenEmbedded-Core. Other available
          tools are optional, but may be useful in some cases.
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Example of a Yocto Project based BSP}
  \begin{itemize}
    \item To build images for a BeagleBone Black, we need:
    \begin{itemize}
      \item The Poky reference system, containing all common recipes
            and tools.
      \item The {\em meta-ti} layer, a set of Texas Instruments
            specific recipes.
    \end{itemize}
    \item All modifications are made in the {\em meta-ti} layer.
      Editing Poky is a \textbf{no-go}!
    \item We will set up this environment in the lab.
  \end{itemize}
\end{frame}

\subsection{The Poky reference system overview}

\begin{frame}
  \frametitle{Getting the Poky reference system}
  \begin{itemize}
    \item All official projects part of the Yocto Project are
          available at \url{https://git.yoctoproject.org/cgit/}
    \item To download the Poky reference system: \\
          {\small
          \code{git clone -b dunfell git://git.yoctoproject.org/poky.git}
          }
    \item Each release has a codename such as \code{dunfell} or \code{hardknott},
	  corresponding to a release number.
		  \begin{itemize}
			  \item A summary can be found at \url{https://wiki.yoctoproject.org/wiki/Releases}
		  \end{itemize}
    \item A new version is released every 6 months, and maintained for 7 months
    \item \textbf{LTS} versions are maintained for 2 years, and announced before their release.

  \end{itemize}
\end{frame}

\begin{frame}{Poky}
  \begin{center}
    \includegraphics[height=0.8\textheight]{slides/yocto-overview/yocto-overview-poky.pdf}
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{Poky source tree 1/2}
  \begin{description}[style=nextline]
  \item[bitbake/] Holds all scripts used by the BitBake command.
    Usually matches the stable release of the BitBake project.
  \item[documentation/] All documentation sources for the Yocto
    Project documentation. Can be used to generate nice PDFs.
  \item[meta/] Contains the OpenEmbedded-Core metadata.
  \item[meta-skeleton/] Contains template recipes for BSP and
    kernel development.
  \end{description}
\end{frame}

\begin{frame}
  \frametitle{Poky source tree 2/2}
  \begin{description}[style=nextline]
  \item[meta-poky/] Holds the configuration for the Poky
    reference distribution.
  \item[meta-yocto-bsp/] Configuration for the Yocto Project
    reference hardware board support package.
  \item[LICENSE] The license under which Poky is distributed (a mix of
    GPLv2 and MIT).
  \item[oe-init-build-env] Script to set up the OpenEmbedded build
    environment. It will create the build directory. It takes an optional
    parameter which is the build directory name. By default, this is
    \code{build}. This script has to be sourced because it changes
    environment variables.
  \item[scripts] Contains scripts used to set up the environment,
    development tools, and tools to flash the generated images on the
    target.
  \end{description}
\end{frame}

\begin{frame}
  \frametitle{Documentation}
  \begin{itemize}
    \item Documentation for the current sources, compiled as a "mega
      manual", is available at:
      \url{https://docs.yoctoproject.org/singleindex.html}
    \item Variables in particular are described in the variable
      glossary:
      \url{https://docs.yoctoproject.org/genindex.html}
  \end{itemize}
\end{frame}

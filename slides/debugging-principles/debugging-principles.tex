\section{Debugging, Tracing, Profiling}

\begin{frame}
\frametitle{Debugging, Tracing, Profiling}
  \begin{columns}
    \column{0.6\textwidth}
    \begin{itemize}
      \item Debugging, tracing and profiling are often used for development purposes
      \item All of these methods have different goals which aim at perfecting the
            software that is being developed
      \item Requires some knowledge about underlying mechanisms to correctly identify
            and fix bugs
    \end{itemize}
    \column{0.4\textwidth}
    \vspace{0.5cm}
    \includegraphics[height=0.6\textheight]{slides/debugging-principles/cloud_word.png}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Debugging}
  \begin{itemize}
    \item Finding and fixing bugs that might exist in your software/system
    \item Use of various tools and methods to achieve that
    \begin{itemize}
      \item Interactive debugging (With GDB for instance)
      \item Postmortem analysis (Using coredump for instance)
      \item Control flow analysis (With tracing tools)
      \item Testing (Targeted tests)
    \end{itemize}
    \item Most commonly done through debuggers in development environment
    \item Generally intrusive, allowing to pause and resume execution
  \end{itemize}
  \vspace{0.5cm}

  {\small \em "Everyone knows that debugging is twice as hard as writing a program in the first place. So if you're as
    clever as you can be when you write it, how will you ever debug it?" 

  - Brian Kernighan }

\end{frame}

\begin{frame}
  \frametitle{Tracing}
  \begin{itemize}
    \item Following the execution flow of an application to understand the
          bottlenecks and problems.
    \item Achieved by instrumenting code either at compile time or runtime.
    \begin{itemize}
      \item Can be done using specific tracers such as {\em LTTng},
            {\em trace-cmd}, {\em SystemTap} etc
    \end{itemize}
    \item Goes from the user space called functions up to the kernel ones
    \item Allows to identify functions and values that are used while
          application executes
    \item Often works by recording traces during runtime and then visualizing
          data.
    \begin{itemize}
      \item Implies a large amount of recorded data since the complete execution
            trace is recorded
      \item Often bigger overhead than profiling.
    \end{itemize}
    \item Can also be used for debugging purpose since data can be extracted
          with tracepoints.
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Profiling}
  \begin{itemize}
    \item Analysis at program runtime to assist performance optimizations
    \item Often achieved by sampling counters during execution
    \item Uses specific tools, libraries and operating system features to
          measure performance.
    \begin{itemize}
      \item Using {\em perf}, {\em OProfile} for instance.
    \end{itemize}
    \item First step consists in gathering data from program execution
    \begin{itemize}
      \item Function call count, memory usage, CPU load, cache miss, etc
    \end{itemize}
    \item Then extracting meaningful information from these data and modify the
          program to optimize it
\end{itemize}
\end{frame}

\begin{frame}{Event sources}
  \begin{itemize}
    \item Some activities like tracing or profiling involve some preliminary
      data collection
    \item Those data are gathered from different \textbf{event sources}, which
      can be of various types.
      \begin{itemize}
        \item Some low-level events are gathered directly by the hardware (eg:
          CPU cycles, MMU exceptions...)
        \item Some events are generated by some code explicitely added to
          generate traces,
          either in an application or in the
          kernel: those are \textbf{static
          tracepoints}
        \item Some are generated by instrumentation
          added at runtime (ie without
          having to modify/rebuild the
          application and/or the kernel):
          those are \textbf{dynamic probes}
      \end{itemize}
  \end{itemize}
\end{frame}
